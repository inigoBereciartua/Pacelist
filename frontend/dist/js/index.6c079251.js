(function(){"use strict";var e={772:function(e,t,n){var s=n(5130),o=n(6768);const i={id:"app"};function r(e,t,n,s,r,l){const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",i,[(0,o.bF)(a)])}var l={name:"App"},a=n(1241);const c=(0,a.A)(l,[["render",r]]);var u=c,d=n(1387),p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAB3RJTUUH5QQdDB03k2U5ZAAAAuhQTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////LuDs6gAAAPd0Uk5TAAABAgMEBQYHCAkKCwwNDg8QERITFBUW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";const h={class:"login-container"},A={class:"login-content"};function g(e,t,n,s,i,r){return(0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",A,[t[2]||(t[2]=(0,o.Lk)("h1",null,"Welcome to Sportify",-1)),t[3]||(t[3]=(0,o.Lk)("p",{class:"subtitle"}," We need you to log in with Spotify so we can personalize playlists with music you love! ",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.loginWithSpotify&&r.loginWithSpotify(...e)),class:"login-button"},t[1]||(t[1]=[(0,o.Lk)("img",{src:p,alt:"Spotify Icon",class:"spotify-icon"},null,-1),(0,o.eW)(" Login with Spotify ")]))])])}const f={NODE_ENV:"production",BASE_URL:"/"}.BACKEND_API_URL||"https://sportify-back.onrender.com";var y={name:"SpotifyLogin",methods:{loginWithSpotify(){window.location.href=`${f}/auth/login?redirectUri=`+window.location.origin+"/playlist-info-form"}}};const m=(0,a.A)(y,[["render",g]]);var k=m,S=n(4232);const v={class:"spotify-container"},L={key:0,class:"centered-content"},C={key:0},b={key:1},w={class:"form-container"},I={class:"form-group"},M={class:"input-with-unit"},P={class:"form-group"},F={class:"input-with-unit"},B={class:"form-group"},E={class:"input-with-unit"};function T(e,t,n,i,r,l){return(0,o.uX)(),(0,o.CE)("div",v,[null==r.playlist?((0,o.uX)(),(0,o.CE)("div",L,[r.username?((0,o.uX)(),(0,o.CE)("h1",C,"Welcome, "+(0,S.v_)(r.username)+"!",1)):((0,o.uX)(),(0,o.CE)("p",b,"Fetching user info...")),t[11]||(t[11]=(0,o.Lk)("p",{class:"intro-text"}," Please enter your body composition and run objectives to help us personalize playlists that match your workout needs. ",-1)),(0,o.Lk)("div",w,[(0,o.Lk)("form",{onSubmit:t[3]||(t[3]=(0,s.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",I,[t[5]||(t[5]=(0,o.Lk)("label",{for:"height"},"Height",-1)),(0,o.Lk)("div",M,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[0]||(t[0]=e=>r.height=e),id:"height",placeholder:"Enter your height"},null,512),[[s.Jo,r.height]]),t[4]||(t[4]=(0,o.Lk)("span",{class:"unit"},"cm",-1))])]),(0,o.Lk)("div",P,[t[7]||(t[7]=(0,o.Lk)("label",{for:"pace"},"Pace",-1)),(0,o.Lk)("div",F,[(0,o.bo)((0,o.Lk)("input",{type:"number",step:"0.1","onUpdate:modelValue":t[1]||(t[1]=e=>r.pace=e),id:"pace",placeholder:"Enter your pace"},null,512),[[s.Jo,r.pace]]),t[6]||(t[6]=(0,o.Lk)("span",{class:"unit"},"min/km",-1))])]),(0,o.Lk)("div",B,[t[9]||(t[9]=(0,o.Lk)("label",{for:"distance"},"Distance",-1)),(0,o.Lk)("div",E,[(0,o.bo)((0,o.Lk)("input",{type:"number",step:"0.1","onUpdate:modelValue":t[2]||(t[2]=e=>r.distance=e),id:"distance",placeholder:"Enter distance"},null,512),[[s.Jo,r.distance]]),t[8]||(t[8]=(0,o.Lk)("span",{class:"unit"},"km",-1))])]),t[10]||(t[10]=(0,o.Lk)("div",{class:"submit-container"},[(0,o.Lk)("button",{type:"submit"},"Submit")],-1))],32)])])):(0,o.Q3)("",!0)])}n(4114);var O=n(7411),Q={name:"PlaylistInfoForm",data(){return{username:"",recentTracks:[],recentTracksWithBpm:[],playlist:null,selectedSongsIds:[],height:170,pace:5,distance:5}},mounted(){this.getUser()},methods:{async getUser(){const e=(0,O.dj)();try{const n=await fetch(`${f}/spotify/userinfo`,{credentials:"include"});if(n.ok){const s=await n.text();let o;try{o=JSON.parse(s),"string"===typeof o&&(o=JSON.parse(o)),o&&o.username?this.username=o.id:e.error("An error has occured while processing user information request")}catch(t){return void e.error("An error has occured while processing user information request")}}else e.error("An error has occured while processing user information request")}catch(t){e.error("An error has occured while processing user information request")}},submitForm(){this.$router.push({name:"PlaylistPreview",query:{height:this.height,pace:this.pace,distance:this.distance}})}}};const N=(0,a.A)(Q,[["render",T],["__scopeId","data-v-1338cca8"]]);var W=N;const H={key:0,class:"recent-tracks"},J={class:"playlist-data"},R={class:"progress-container"},U=["value","max"],D={class:"submit-container"},Y={class:"track-grid"},q=["onClick"],Z=["src"],x={class:"track-name"},j={class:"artist-name"};function G(e,t,n,s,i,r){const l=(0,o.g2)("LoadingSpinner");return(0,o.uX)(),(0,o.CE)("div",null,[i.playlist?((0,o.uX)(),(0,o.CE)("div",H,[(0,o.Lk)("h2",null,(0,S.v_)(i.playlist.name),1),(0,o.Lk)("div",J,[(0,o.Lk)("div",R,[(0,o.Lk)("h4",null,"Playlist duration: "+(0,S.v_)(r.currentSelectedSongsDurationInMinutes)+" minutes / "+(0,S.v_)(r.neededDurationForSessionInMinutes)+" minutes needed",1),(0,o.Lk)("progress",{value:r.currentSelectedSongsDurationInMinutes,max:r.neededDurationForSessionInMinutes},null,8,U)]),(0,o.Lk)("div",D,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.submitSelectedSongs&&r.submitSelectedSongs(...e))},"Submit Selected Songs")]),(0,o.Lk)("div",Y,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.playlist.songs,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t,class:(0,S.C4)([{"selected-song":i.selectedSongsIds.includes(e.id)},"track-item"]),style:(0,S.Tr)({backgroundColor:i.selectedSongsIds.includes(e.id)?"#182c25":"#455b55"}),onClick:t=>r.toggleSelection(e.id)},[(0,o.Lk)("img",{src:e.picture,alt:"Album Cover",class:"album-cover"},null,8,Z),(0,o.Lk)("p",x,[(0,o.Lk)("strong",null,(0,S.v_)(e.title),1)]),(0,o.Lk)("p",j,"by "+(0,S.v_)(e.artist),1)],14,q)))),128))])])])):(0,o.Q3)("",!0),(0,o.bF)(l,{isLoading:null==i.playlist},null,8,["isLoading"])])}const X={key:0,class:"spinner"};function K(e,t,n,s,i,r){return n.isLoading?((0,o.uX)(),(0,o.CE)("div",X,t[0]||(t[0]=[(0,o.Lk)("div",{class:"spinner-circle"},null,-1)]))):(0,o.Q3)("",!0)}var V={name:"LoadingSpinner",props:{isLoading:{type:Boolean,required:!0}}};const z=(0,a.A)(V,[["render",K],["__scopeId","data-v-635f43a4"]]);var _=z,$={name:"PlaylistPreview",components:{LoadingSpinner:_},data(){return{recentTracks:[],recentTracksWithBpm:[],playlist:null,selectedSongsIds:[],loading:!1}},mounted(){const e=this.$route.query.pace,t=this.$route.query.distance,n=this.$route.query.height;if(e&&t&&n)this.loading=!0,this.getTracksForSession(e,t,n);else{const e=(0,O.dj)();e.error("Invalid form data"),this.$router.push({name:"PlaylistInfoForm"})}},watch:{playlist:{handler:function(e){if(null!=e&&null!=e.songs){let t=0,n=[];for(const s of e.songs){if(!(t<=e.neededDurationInSeconds))break;n.push(s.id),t+=s.duration}this.selectedSongsIds=n}},deep:!0}},computed:{currentSelectedSongsDurationInMinutes(){if(!this.playlist||!this.playlist.songs)return 0;const e=this.playlist.songs.filter((e=>this.selectedSongsIds.includes(e.id))).reduce(((e,t)=>e+t.duration),0);return Math.floor(e/60)},neededDurationForSessionInMinutes(){return this.playlist&&this.playlist.neededDurationInSeconds?Math.floor(this.playlist.neededDurationInSeconds/60):0}},methods:{async getTracksForSession(e,t,n){const s=(0,O.dj)();try{const i=await fetch(`${f}/runningsession/playlist?pace=${e}&distance=${t}&height=${n}`,{credentials:"include"});if(console.log({response:i}),i.ok){const e=await i.text();let t;try{t=JSON.parse(e),"string"===typeof t&&(t=JSON.parse(t)),this.playlist=t}catch(o){return void s.error("An error has occured while processing request")}}else s.error("An error has occurred while fetching playlist:",i.statusText)}catch(o){s.error("An error has occurred while fetching playlist:",o)}},toggleSelection(e){const t=this.selectedSongsIds.indexOf(e);-1===t?this.selectedSongsIds.push(e):this.selectedSongsIds.splice(t,1)},submitSelectedSongs(){const e=(0,O.dj)(),t={name:this.playlist.name,visible:!1,colaborative:!1,songIds:this.selectedSongsIds};this.loading=!0,fetch(`${f}/spotify/playlist`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}).then((t=>{this.loading=!1,t.ok?(e.success("Playlist has been successfully created!"),this.playlist=null,this.$router.push({name:"PlaylistInfoForm"})):e.error("Failed to submit selected songs:",t.statusText)})).catch((t=>{e.error("Failed to submit selected songs:",t)}))}}};const ee=(0,a.A)($,[["render",G],["__scopeId","data-v-0dd8d48e"]]);var te=ee;const ne=[{path:"/",name:"Home",component:k},{path:"/login",name:"SpotifyLogin",component:k},{path:"/playlist-info-form",name:"PlaylistInfoForm",component:W},{path:"/playlist-preview",name:"PlaylistPreview",component:te}],se=(0,d.aE)({history:(0,d.LA)(),routes:ne});var oe=se;n(7917);document.title="Sportify";const ie=(0,s.Ef)(u),re={position:"top-center",timeout:5e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!0,closeButton:"button",icon:!0,rtl:!1};ie.use(O.Ay,re),ie.use(oe).mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],i=e[u][2];for(var l=!0,a=0;a<s.length;a++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](s[a])}))?s.splice(a--,1):(l=!1,i<r&&(r=i));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={57:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,r=s[0],l=s[1],a=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(a)var u=a(n)}for(t&&t(s);c<r.length;c++)i=r[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},s=self["webpackChunksportify"]=self["webpackChunksportify"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(772)}));s=n.O(s)})();
//# sourceMappingURL=index.6c079251.js.map